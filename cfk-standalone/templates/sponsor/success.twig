{% extends "layouts/base.twig" %}

{% block title %}Sponsorship Request Received!{% endblock %}

{% block head_extra %}
    <link rel="stylesheet" href="{{ baseUrl('assets/css/sponsorship-form.css') }}">
    <style>
        .success-page {
            max-width: 800px;
            margin: 3rem auto;
            padding: 0 1rem;
        }

        .success-hero {
            background: linear-gradient(135deg, #2c5530 0%, #1e3d24 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .success-hero__icon {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }

        .success-hero__icon svg {
            width: 48px;
            height: 48px;
        }

        .success-hero__title {
            font-size: 2rem;
            font-weight: 700;
            margin: 0 0 1rem 0;
        }

        .success-hero__subtitle {
            font-size: 1.125rem;
            opacity: 0.9;
            margin: 0;
        }

        .success-details {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .success-details__title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c5530;
            margin: 0 0 1.5rem 0;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.75rem;
        }

        .sponsored-children-list {
            margin-bottom: 1.5rem;
        }

        .sponsored-child-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .sponsored-child-item:last-child {
            margin-bottom: 0;
        }

        .sponsored-child-item__photo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }

        .sponsored-child-item__info strong {
            display: block;
            font-size: 1.125rem;
            margin-bottom: 0.25rem;
        }

        .next-steps {
            background: #f0f9ff;
            border: 2px solid #bae6fd;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .next-steps__title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #0c4a6e;
            margin: 0 0 1rem 0;
        }

        .next-steps__list {
            margin: 0;
            padding-left: 1.5rem;
        }

        .next-steps__list li {
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }

        .next-steps__list li strong {
            color: #0c4a6e;
        }

        .success-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        @media (min-width: 640px) {
            .success-actions {
                flex-direction: row;
                justify-content: center;
            }
        }
    </style>
{% endblock %}

{% block content %}
<div class="success-page">
    {# Success Hero Section #}
    <div class="success-hero">
        <div class="success-hero__icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
        </div>
        <h1 class="success-hero__title">Thank You for Your Generosity!</h1>
        <p class="success-hero__subtitle">
            Your sponsorship request has been received and is being processed.
        </p>
    </div>

    {# Sponsored Children Details #}
    <div class="success-details">
        <h2 class="success-details__title">Your Sponsored Child{% if sponsorships|length > 1 %}ren{% endif %}</h2>

        <div class="sponsored-children-list">
            {% for sponsorship in sponsorships %}
                <div class="sponsored-child-item">
                    <img src="{{ getPhotoUrl(sponsorship.photo_filename, sponsorship) }}"
                         alt="Avatar for {{ sponsorship.child_display_id }}"
                         class="sponsored-child-item__photo">
                    <div class="sponsored-child-item__info">
                        <strong>{{ sponsorship.child_display_id }}</strong>
                        <div>
                            {{ displayAge(sponsorship.child_age) }},
                            {{ sponsorship.child_gender == 'M' ? 'Boy' : 'Girl' }},
                            {{ sponsorship.child_grade }}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>

        <p style="margin: 0; color: #6b7280;">
            <strong>Sponsor:</strong> {{ sponsorships[0].sponsor_name }}<br>
            <strong>Email:</strong> {{ sponsorships[0].sponsor_email }}
        </p>
    </div>

    {# Next Steps #}
    <div class="next-steps">
        <h2 class="next-steps__title">What Happens Next?</h2>
        <ol class="next-steps__list">
            <li>
                <strong>Confirmation Email:</strong> Within 24 hours, you'll receive a detailed confirmation email with:
                <ul>
                    <li>Complete child information (sizes, interests, wishes)</li>
                    <li>Shopping list (if applicable)</li>
                    <li>Gift drop-off instructions</li>
                    <li>Important dates and deadlines</li>
                </ul>
            </li>
            <li>
                <strong>Shopping Time:</strong> Use the shopping list to purchase gifts that match your child's interests and needs.
            </li>
            <li>
                <strong>Gift Delivery:</strong> Drop off gifts at our collection center by the deadline specified in your confirmation email.
            </li>
            <li>
                <strong>Making Christmas Magic:</strong> We'll ensure your gifts reach your sponsored child on Christmas!
            </li>
        </ol>
    </div>

    {# Action Buttons #}
    <div class="success-actions">
        <a href="{{ baseUrl('/children') }}" class="btn btn--primary btn--large">
            Sponsor Another Child
        </a>
        <a href="{{ baseUrl('/') }}" class="btn btn--secondary btn--large">
            Return to Homepage
        </a>
    </div>

    {# Support Contact #}
    <div class="form__footer" style="margin-top: 2rem;">
        <p class="form__footer-text">
            <strong>Questions or concerns?</strong> Please don't hesitate to contact us at
            <a href="mailto:{{ adminEmail }}">{{ adminEmail }}</a>
        </p>
        <p class="form__footer-text" style="margin-bottom: 0;">
            Thank you for being part of Christmas for Kids and making the holidays special for children in need!
        </p>
    </div>
</div>
{% endblock %}
